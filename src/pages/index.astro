---
import { ProductList } from '@/components/products';
import MainLayout from '@/layouts/MainLayout.astro';
import { actions } from 'astro:actions';

const {data, error} = await actions.getProductsByPage({});

if (error) {
  return Astro.redirect('/');
}

const { products, totalPages } = data;
---

<MainLayout>
  <h1 class="text-3xl">Product List</h1>

  <ProductList products={data.products} client:load/>
</MainLayout>
